<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="PMD uses GitHub Actions as the CI/CD infrastructure to build and release new versions.This page gives an overview of how these workflows work and how to use ...">
<meta name="keywords" content=" ">
<title>GitHub Actions Workflows | PMD Source Code Analyzer</title>


<link rel="stylesheet" type="text/css" href="assets/fontawesome-free-5.15.4-web/css/all.min.css">
<link rel="stylesheet" type="text/css" href="assets/bootstrap-4.5.2-dist/css/bootstrap.min.css">

<link rel="stylesheet" type="text/css" href="css/syntax.css">
<link rel="stylesheet" type="text/css" href="css/modern-business.css">
<link rel="stylesheet" type="text/css" href="css/customstyles.css">
<link rel="stylesheet" type="text/css" href="css/theme-green.css">
<link rel="stylesheet" type="text/css" href="css/pmd-customstyles.css">

<link rel="shortcut icon" href="images/logo/favicon.ico" type="image/x-icon">
<link rel="icon" href="images/logo/favicon.ico" type="image/x-icon">

<link rel="alternate" type="application/rss+xml" title="" href="feed.xml">

</head>
<body>
<!-- Content is offset by the height of the topnav bar. -->
<!-- There's already a padding-top rule in modern-business.css, but it apparently doesn't work on Firefox 60 and Chrome 67 -->
<div id="topbar-content-offset">
<!-- Navigation -->
<nav class="navbar navbar-expand-lg fixed-top navbar-dark">
    <div class="container topnavlinks">
        <a class="navbar-brand fas fa-home fa-lg" href="index.html">&nbsp;<span class="projectTitle"> PMD Source Code Analyzer Project</span></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto mt-2 mt-lg-0"></ul>
            <ul class="navbar-nav">
                <!-- toggle sidebar button -->
                <li class="nav-item"><a id="tg-sb-link" class="nav-link" href="#"><i id="tg-sb-icon" class="fas fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->
                <li class="nav-item"><a class="nav-link" href="https://github.com/pmd/pmd/releases/tag/pmd_releases%2F7.19.0-SNAPSHOT" target="_blank">Download</a></li>
                <li class="nav-item"><a class="nav-link" href="https://github.com/pmd/pmd" target="_blank">GitHub</a></li>
                <!-- entries with drop-downs appear here -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarPmdVersionsDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">7.19.0-SNAPSHOT<b class="caret"></b></a>
                    <div class="dropdown-menu" aria-labelledby="navbarPmdVersionsDropdownMenuLink" id="pmdVersions">
                    </div>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="search" placeholder="üîçÔ∏è Type 's' to search..." id="search-input" autocomplete="off">
                <ul id="results-container"></ul>
            </form>
        </div>
    </div>
</nav>

<!-- Page Content -->
<div class="container-toc-wrapper">
    <div class="container">
        <div class="col-lg-12">&nbsp;</div>
        <!-- Content Row -->
        <div class="row">
            
            
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                








<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">PMD 7.19.0-SNAPSHOT</li>
    <div class="sidebarTitleDate">Release date: 28-November-2025</div>
    
    
    
        
    
    <li>
        
        <a href="#">About</a>
        
        <ul>
            
            

            

                
                <li><a href="index.html">Home</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_release_notes.html">Release notes</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_release_notes_pmd7.html">Release notes (PMD 7)</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_about_help.html">Getting help</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_about_release_policies.html">Release policies</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_about_support_lifecycle.html">Support lifecycle</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_about_security.html">Security</a></li>
                

            

            
            
        </ul>
     </li>
       
        
    
    <li>
        
        <a href="#">User Documentation</a>
        
        <ul>
            
            

            

                
                <li><a href="pmd_userdocs_migrating_to_pmd7.html">Migration Guide for PMD 7</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_userdocs_installation.html">Installation and basic CLI usage</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_userdocs_making_rulesets.html">Making rulesets</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_userdocs_configuring_rules.html">Configuring rules</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_userdocs_best_practices.html">Best practices</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_userdocs_suppressing_warnings.html">Suppressing warnings</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_userdocs_incremental_analysis.html">Incremental analysis</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_userdocs_cli_reference.html">PMD CLI reference</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_userdocs_report_formats.html">PMD Report formats</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_userdocs_3rdpartyrulesets.html">3rd party rulesets</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_userdocs_signed_releases.html">Signed Releases</a></li>
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">CPD reference</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_userdocs_cpd.html">Copy-paste detection</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_cpd_report_formats.html">CPD Report formats</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Extending PMD</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_userdocs_extending_writing_rules_intro.html">Introduction to writing rules</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_extending_your_first_rule.html">Your first rule</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_extending_writing_xpath_rules.html">XPath rules</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_extending_writing_java_rules.html">Java rules</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_extending_designer_reference.html">Rule designer reference</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_extending_defining_properties.html">Defining rule properties</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_extending_rule_guidelines.html">Rule guidelines</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_extending_testing.html">Testing your rules</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_extending_ast_dump.html">Creating (XML) dump of the AST</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Tools / Integrations</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_userdocs_tools_maven.html">Maven PMD Plugin</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_tools_gradle.html">Gradle</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_tools_ant.html">Ant</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_tools_java_api.html">PMD Java API</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_tools_bld.html">bld PMD Extension</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_tools_ci.html">CI integrations</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_tools_ide_plugins.html">IDE Plugins</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_userdocs_tools.html">Other Tools / Integrations</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
        </ul>
     </li>
       
        
    
    <li>
        
        <a href="#">Rule Reference</a>
        
        <ul>
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Apex Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_apex.html">Index</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_apex_bestpractices.html">Best Practices</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_apex_codestyle.html">Code Style</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_apex_design.html">Design</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_apex_documentation.html">Documentation</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_apex_errorprone.html">Error Prone</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_apex_performance.html">Performance</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_apex_security.html">Security</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">HTML Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_html.html">Index</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_html_bestpractices.html">Best Practices</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Java Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_java.html">Index</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_java_bestpractices.html">Best Practices</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_java_codestyle.html">Code Style</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_java_design.html">Design</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_java_documentation.html">Documentation</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_java_errorprone.html">Error Prone</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_java_multithreading.html">Multithreading</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_java_performance.html">Performance</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_java_security.html">Security</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Java Server Pages Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_jsp.html">Index</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_jsp_bestpractices.html">Best Practices</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_jsp_codestyle.html">Code Style</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_jsp_design.html">Design</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_jsp_errorprone.html">Error Prone</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_jsp_security.html">Security</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">JavaScript Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_ecmascript.html">Index</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_ecmascript_bestpractices.html">Best Practices</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_ecmascript_codestyle.html">Code Style</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_ecmascript_errorprone.html">Error Prone</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_ecmascript_performance.html">Performance</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Kotlin Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_kotlin.html">Index</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_kotlin_bestpractices.html">Best Practices</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_kotlin_errorprone.html">Error Prone</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Maven POM Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_pom.html">Index</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_pom_errorprone.html">Error Prone</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Modelica Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_modelica.html">Index</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_modelica_bestpractices.html">Best Practices</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">PLSQL Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_plsql.html">Index</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_plsql_bestpractices.html">Best Practices</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_plsql_codestyle.html">Code Style</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_plsql_design.html">Design</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_plsql_errorprone.html">Error Prone</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Salesforce Visualforce Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_visualforce.html">Index</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_visualforce_security.html">Security</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Scala Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_scala.html">Index</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Swift Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_swift.html">Index</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_swift_bestpractices.html">Best Practices</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_swift_errorprone.html">Error Prone</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Velocity Template Language (VTL) Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_velocity.html">Index</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_velocity_bestpractices.html">Best Practices</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_velocity_design.html">Design</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_velocity_errorprone.html">Error Prone</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">WSDL Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_wsdl.html">Index</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">XML Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_xml.html">Index</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_xml_bestpractices.html">Best Practices</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_xml_errorprone.html">Error Prone</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">XSL Rules</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_rules_xsl.html">Index</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_xsl_codestyle.html">Code Style</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_rules_xsl_performance.html">Performance</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
        </ul>
     </li>
       
        
    
    <li>
        
        <a href="#">Language-Specific Documentation</a>
        
        <ul>
            
            

            

                
                <li><a href="pmd_languages_index.html">Overview</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_configuration.html">Language configuration</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_apex.html">Apex</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_cpp.html">C/C++</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_cs.html">C#</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_css.html">CSS</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_coco.html">Coco</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_dart.html">Dart</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_fortran.html">Fortran</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_gherkin.html">Gherkin</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_go.html">Go</a></li>
                

            

            
            
            
            
            

            

                
                <li><a href="pmd_languages_html.html">HTML</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_java.html">Java</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_js_ts.html">JavaScript / TypeScript</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_jsp.html">JSP</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_julia.html">Julia</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_kotlin.html">Kotlin</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_lua.html">Lua</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_matlab.html">Matlab</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_modelica.html">Modelica</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_objectivec.html">Objective-C</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_perl.html">Perl</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_php.html">PHP</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_plsql.html">PLSQL</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_python.html">Python</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_ruby.html">Ruby</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_rust.html">Rust</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_scala.html">Scala</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_swift.html">Swift</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_tsql.html">T-SQL</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_visualforce.html">Visualforce</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_velocity.html">Velocity Template Language (VTL)</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_languages_xml.html">XML and XML dialects</a></li>
                

            

            
            
        </ul>
     </li>
       
        
    
    <li>
        
        <a href="#">Developer Documentation</a>
        
        <ul>
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Contributing</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_devdocs_contributing.html">Contributing</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_devdocs_development.html">Developer resources</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_devdocs_contributing_newcomers_guide.html">Newcomers' Guide</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_devdocs_writing_documentation.html">Writing documentation</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Building PMD</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_devdocs_building_general.html">General Info</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_devdocs_building.html">Building PMD from source</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_devdocs_building_intellij.html">Building PMD with IntelliJ IDEA</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_devdocs_building_eclipse.html">Building PMD with Eclipse IDE</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_devdocs_building_vscode.html">Building PMD with VS Code IDE</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_devdocs_building_netbeans.html">Building PMD with Netbeans IDE</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                <li><a href="pmd_devdocs_roadmap.html">Roadmap</a></li>
                

            

            
            
            

            

                
                <li class="active"><a href="pmd_devdocs_github_actions_workflows.html">GitHub Actions Workflows</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_devdocs_how_pmd_works.html">How PMD works</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_devdocs_logging.html">Logging</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_devdocs_pmdtester.html">Pmdtester</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_devdocs_rule_deprecation_policy.html">Rule Deprecation Policy</a></li>
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Major contributions</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_devdocs_major_rule_guidelines.html">Rule Guidelines</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_devdocs_major_adding_dialect.html">Adding a new dialect</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_devdocs_major_adding_new_language_javacc.html">Adding a new language (JavaCC)</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_devdocs_major_adding_new_language_antlr.html">Adding a new language (ANTLR)</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_devdocs_major_adding_new_cpd_language.html">Adding a new CPD language</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                
                
                <li class="subfolders">
                    <a href="#">Experimental features</a>
                    <ul>
                        
                        
                        
                        <li><a href="tag_experimental.html">List of experimental Features</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
        </ul>
     </li>
       
        
    
    <li>
        
        <a href="#">Project documentation</a>
        
        <ul>
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Trivia about PMD</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_projectdocs_trivia_news.html">PMD in the press</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_projectdocs_trivia_products.html">Products & books related to PMD</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_projectdocs_trivia_similarprojects.html">Similar projects</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_projectdocs_trivia_meaning.html">What does 'PMD' mean?</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
            

            

                
                <li><a href="pmd_projectdocs_logo.html">Logo</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_projectdocs_faq.html">FAQ</a></li>
                

            

            
            
            

            

                
                <li><a href="license.html">License</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_projectdocs_credits.html">Credits</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_release_notes_old.html">Old release notes</a></li>
                

            

            
            
            

            

                
                <li><a href="pmd_projectdocs_decisions.html">Decisions</a></li>
                

            

            
            
            

            

                
                
                <li class="subfolders">
                    <a href="#">Project management</a>
                    <ul>
                        
                        
                        
                        <li><a href="pmd_projectdocs_committers_infrastructure.html">Infrastructure</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_projectdocs_committers_releasing.html">Release process</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_projectdocs_committers_merging_pull_requests.html">Merging pull requests</a></li>
                        
                        
                        
                        
                        
                        <li><a href="pmd_projectdocs_committers_main_landing_page.html">Main Landing page</a></li>
                        
                        
                        
                    </ul>
                </li>
                
                

            

            
            
        </ul>
     </li>
       
        
        
</ul>

            </div>
            
            

            <!-- Content Column -->
            <div class="col-md-9" id="tg-sb-content">
                <header>
    <div class="row">
        <div class="col-lg-12">
            <a href="./" role="button"
                ><i class="fa fa-home fa-lg"></i
            ></a>
            ¬ª GitHub Actions Workflows   
            <a
                target="_blank"
                href="https://github.com/pmd/pmd/blob/main/docs/pages/pmd/devdocs/github_actions_workflows.md"
                class="float-right"
                role="button"
                ><i class="fab fa-github fa-lg"></i> Edit on GitHub</a
            >
             
        </div>
    </div>

    <hr />
</header>


<div class="post-header">
   <h1 class="post-title-main">GitHub Actions Workflows</h1>
</div>

<div class="post-content" data-github-edit-url="https://github.com/pmd/pmd/blob/main/docs/pages/pmd/devdocs/github_actions_workflows.md">

   
    <div class="summary">PMD uses GitHub Actions as the CI/CD infrastructure to build and release new versions.
This page gives an overview of how these workflows work and how to use them.
</div>
   
    <details id="inline-toc-details">
        <summary>Table of Contents</summary>
        <div id="inline-toc"><!-- empty, move TOC here when screen size too small --></div>
    </details>

  <div class="alert alert-info" role="alert">
  <p><i class="fas fa-info-circle"></i>
<strong>Note:</strong>
This page is work in progress and does not yet describe all workflows.</p>
</div>

<h2 id="build-build-pull-request-build-snapshot-build-release">Build, Build Pull Request, Build Snapshot, Build Release</h2>

<p>‚ÄúBuild‚Äù itself is a <a href="https://docs.github.com/en/actions/sharing-automations/reusing-workflows">reuseable workflow</a>,
that is called by ‚ÄúBuild Pull Request‚Äù and ‚ÄúBuild Snapshot‚Äù and ‚ÄúBuild Release‚Äù.</p>

<ul>
  <li>Workflow files:
    <ul>
      <li><a href="https://github.com/pmd/pmd/blob/main/.github/workflows/build.yml">https://github.com/pmd/pmd/blob/main/.github/workflows/build.yml</a></li>
      <li><a href="https://github.com/pmd/pmd/blob/main/.github/workflows/build-pr.yml">https://github.com/pmd/pmd/blob/main/.github/workflows/build-pr.yml</a></li>
      <li><a href="https://github.com/pmd/pmd/blob/main/.github/workflows/build-snapshot.yml">https://github.com/pmd/pmd/blob/main/.github/workflows/build-snapshot.yml</a></li>
      <li><a href="https://github.com/pmd/pmd/blob/main/.github/workflows/build-release.yml">https://github.com/pmd/pmd/blob/main/.github/workflows/build-release.yml</a></li>
    </ul>
  </li>
  <li>Builds:
    <ul>
      <li>Build Pull Request: <a href="https://github.com/pmd/pmd/actions/workflows/build-pr.yml">https://github.com/pmd/pmd/actions/workflows/build-pr.yml</a></li>
      <li>Build Snapshot: <a href="https://github.com/pmd/pmd/actions/workflows/build-snapshot.yml">https://github.com/pmd/pmd/actions/workflows/build-snapshot.yml</a></li>
      <li>Build Release: <a href="https://github.com/pmd/pmd/actions/workflows/build-release.yml">https://github.com/pmd/pmd/actions/workflows/build-release.yml</a></li>
    </ul>
  </li>
</ul>

<p>All these workflows execute exactly the same steps. But only the triggering event is different.
It is designed to run on the main repository in PMD‚Äôs GitHub organization as well as for forks, as it does
not require any secrets.</p>

<p>‚ÄúBuild Pull Request‚Äù is triggered, whenever a pull request is created or synchronized.</p>

<p>‚ÄúBuild Snapshot‚Äù is triggered, whenever new commits are pushed to a branch (including the default branch and
including forks). This is also a scheduled workflow that runs every month to make sure, the project
can still be built.</p>

<p>‚ÄúBuild Release‚Äù is triggered, whenever a tag is pushed (excluding SNAPSHOT pre-release tags).
Note that the whole project is built at once, that
means if pmd-designer/pmd-core update is required, this can‚Äôt be built. See also
<a href="https://github.com/pmd/pmd/issues/4446">Circular dependencies between pmd-designer, pmd-core, pmd-cli #4446</a>.
As this happens very seldom, this situation is ignored for now.</p>

<p>In order to avoid unnecessary builds, we use concurrency control to make sure, we cancel any in-progress jobs for
the current branch or pull request when a new commit has been pushed. This means, only the latest commit is built,
which is enough, since only this will be released or merged in the end. Only the latest build matters.</p>

<p>The workflow is self-contained, e.g. it doesn‚Äôt depend on the shell scripts from PMD‚Äôs build-tools.
It also uses only read permissions and doesn‚Äôt need access to any secrets. It is safe to run also on
forks.</p>

<p>During the build we create a couple of artifacts, that can be downloaded:</p>

<ul>
  <li>compile-artifact: contains all the built classes (everything in the <code class="language-plaintext highlighter-rouge">target/</code> directories). It is built under Linux,
so unfortunately it can only be used to speed up other Linux based builds, but not Windows or MacOS.</li>
  <li>staging-repository: contains all the artifacts of groupId <code class="language-plaintext highlighter-rouge">net.sourceforge.pmd</code>. Could be used as a local
repository to test against this built PMD version without the need to deploy the SNAPSHOTs anywhere. It is
actually used by the dogfood job.</li>
  <li>dist-artifact: contains the binary distribution files, ready to be downloaded. This can be used to test
PMD with the changes from the pull request without the need to build it locally. It is actually used by the
regression tester job to avoid building PMD another time. It also includes the SBOM files (in json and xml format).</li>
  <li>docs-artifact: contains the generated PMD documentation including rule descriptions.</li>
  <li>javadocs-artifact: contains the javadoc jars of all PMD modules generated during build.</li>
  <li>pmd-regression-tester: contains the generation regression report, if there were any changes to rules.</li>
</ul>

<p>In order to have fast feedback of the build results, we run a couple of jobs in parallel and not sequentially.
The jobs are:</p>

<ul>
  <li>‚Äúcompile‚Äù: First a fast compile job to sort out any basic problems at the beginning. If this job fails, nothing
else is executed. It also populates the build cache (maven dependencies) that is reused for the following jobs.
The created artifacts are: ‚Äúcompile-artifact‚Äù, ‚Äústaging-repository‚Äù, ‚Äúdist-artifact‚Äù.</li>
  <li>After this first job, a bunch of other jobs are run in parallel:
    <ul>
      <li>‚Äúverify‚Äù: runs a complete <code class="language-plaintext highlighter-rouge">./mvnw verify</code> with all code checks like checkstyle, japicmp, javadoc, etc.
but excluding unit tests (these are run in a separate job).
This job is only run on linux. It reuses the already compiled artifacts from the first ‚Äúcompile‚Äù job.
Since it runs javadoc, it creates the javadocs-artifact.</li>
      <li>‚Äúverify-unittests‚Äù: just runs the unit tests on Linux, Windows and MacOS. Only linux reuses the
‚Äúcompile-artifact‚Äù from the first job. For Windows/MacOS we can‚Äôt reuse this due to platform specific line
endings and timestamp issues.</li>
      <li>‚Äúdogfood‚Äù: runs maven-pmd-plugin on PMD with the latest changes from this very pull request. It uses the
‚Äústaging-repository‚Äù artifact.</li>
      <li>‚Äúdocumentation‚Äù: generates the rule documentations and builds PMD‚Äôs documentation page using jekyll.
It also executes the verification for wrong rule tags and dead links. Additional it contains the release
notes in markdown format, to be used for release publishing. It creates the artifact ‚Äúdocs-artifact‚Äù.</li>
      <li>‚Äúregressiontester‚Äù: runs the <a href="pmd_devdocs_pmdtester.html">pmdtester</a> to produce the regression report.
It reuses the artifact ‚Äúdist-artifact‚Äù so that we don‚Äôt need to build PMD again. It uses a different build
cache as the other jobs, as this cache now contains the test projects (like Spring Framework) and their
dependencies. It produces the artifact ‚Äúpmd-regression-tester‚Äù with the regression report.</li>
    </ul>
  </li>
</ul>

<h2 id="publish-results-from-pull-requests">Publish Results from Pull Requests</h2>

<ul>
  <li>Builds: <a href="https://github.com/pmd/pmd/actions/workflows/publish-pull-requests.yml">https://github.com/pmd/pmd/actions/workflows/publish-pull-requests.yml</a></li>
  <li>Workflow file: <a href="https://github.com/pmd/pmd/blob/main/.github/workflows/publish-pull-requests.yml">https://github.com/pmd/pmd/blob/main/.github/workflows/publish-pull-requests.yml</a></li>
</ul>

<p>This workflow runs after ‚ÄúBuild Pull Request‚Äù, when it is completed. It runs in the context of our own
repository and has write permissions and complete access to the configured secrets.
For security reasons, this workflow won‚Äôt check out the pull request code and won‚Äôt build anything.</p>

<p>It just uses the artifacts from the pull request build, uploads it as static website and adds
a commit status and check status to the PR and finally adds a PR comment.</p>

<p>Both the ‚Äúdocs-artifact‚Äù and the ‚Äúpmd-regression-tester‚Äù artifact are uploaded to an AWS S3 bucket
called <strong>pmd-pull-requests</strong>. This bucket is served via AWS Cloudfront (for having TLS) under
the URL <a href="https://pull-requests.pmd-code.org">https://pull-requests.pmd-code.org</a>. Note, there is no directory listing. The results
of each pull request are uploaded under the folders ‚Äúpr-{PR_NUMBER}/{PR_SHA}/docs‚Äù and ‚Äúpr-{PR_NUMBER}/{PR_SHA}/regression‚Äù,
respectively. The data in the S3 bucket is available for 60 days, after that the files are removed
automatically (hopefully). Since the head SHA of the PR is included in the URL, an updated PR will upload
new versions of the artifacts. Otherwise, Cloudfront‚Äôs cache might prevent us from seeing the
updated artifacts.</p>

<p>In order to upload the files to AWS S3, we use the <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/s3/index.html">AWS CLI</a>
tool, that is available on the GitHub provided runners for GitHub Actions. It needs the following <strong>secrets</strong>:</p>

<ul>
  <li>AWS_S3_PMD_PULL_REQUESTS_ACCESS_KEY_ID</li>
  <li>AWS_S3_PMD_PULL_REQUESTS_SECRET_ACCESS_KEY</li>
</ul>

<p>These are configured at the organization level of pmd: <a href="https://github.com/organizations/pmd/settings/secrets/actions">https://github.com/organizations/pmd/settings/secrets/actions</a>.</p>

<p>In order to set the commit status and add a check status, we use <a href="https://cli.github.com/manual/">GitHub‚Äôs CLI</a> tool
which is also available on the GitHub provided runners for GitHub Actions. It will use the GitHub token
that the workflow is assigned to automatically and that is available as the secret ‚ÄúGITHUB_TOKEN‚Äù.
The permissions are controlled in the workflow yaml file itself.
See <a href="https://docs.github.com/en/actions/security-for-github-actions/security-guides/automatic-token-authentication">Automatic token authentication</a>.</p>

<p>In the end, we use the action <a href="https://github.com/marocchino/sticky-pull-request-comment">sticky-pull-request-comment</a>
to create or update a comment on the pull request which shows the regression tester summary.</p>

<p>This workflow is in that sense optional, as the docs-artifact and pmd-regression-tester artifacts can
be manually downloaded from the ‚ÄúPull Request Build‚Äù workflow run. It merely adds convenience by
giving easy access to a preview of the documentation and to the regression tester results.</p>

<p>In the end, this workflow adds additional links to a pull request page. For the comment, GitHub seems
to automatically add ‚Äúrel=nofollow‚Äù to the links in the text. This is also applied for the check status
pages. However, the links in the commit status are plain links. This might lead to unnecessary
crawling by search engines. To avoid this, the following robots.txt is used
at <a href="https://pull-requests.pmd-code.org/robots.txt">https://pull-requests.pmd-code.org/robots.txt</a> to disallow any (search engine) bot:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>User-agent: *
Disallow: /
</code></pre></div></div>

<p>The reasons, why we don‚Äôt want to have the pages there indexed: They are short-lived and only
temporary. These temporary created documentation pages should not end up in any search result.
This also helps to avoid unnecessary traffic and load for both the hosting side and the
crawling side.</p>

<h2 id="publish-snapshot">Publish Snapshot</h2>

<ul>
  <li>Builds: <a href="https://github.com/pmd/pmd/actions/workflows/publish-snapshot.yml">https://github.com/pmd/pmd/actions/workflows/publish-snapshot.yml</a></li>
  <li>Workflow file: <a href="https://github.com/pmd/pmd/blob/main/.github/workflows/publish-snapshot.yml">https://github.com/pmd/pmd/blob/main/.github/workflows/publish-snapshot.yml</a></li>
</ul>

<p>This runs after ‚ÄúBuild Snapshot‚Äù of a push on the <code class="language-plaintext highlighter-rouge">main</code> branch is finished.
It runs in the context of our own repository and has access to all secrets. In order
to have a nicer progress display in GitHub actions, we leverage ‚Äúenvironments‚Äù, which also
contain secrets.</p>

<p>There is a first job ‚Äúcheck-version‚Äù that just determines the version of PMD we are building. This is to ensure,
we are actually building a SNAPSHOT version. Then a couple of other jobs are being executed in parallel:</p>

<ul>
  <li>deploy-to-maven-central: Rebuilds PMD from branch main and deploys the snapshot artifacts to
<a href="https://central.sonatype.com/service/rest/repository/browse/maven-snapshots/net/sourceforge/pmd/">https://central.sonatype.com/service/rest/repository/browse/maven-snapshots/net/sourceforge/pmd/</a>.
Rebuilding is necessary in order to produce all necessary artifacts (sources, javadoc) and also gpg-sign the
artifacts. This is not available from the build artifacts of the ‚ÄúBuild‚Äù workflow.
    <ul>
      <li>Environment: maven-central</li>
      <li>Secrets: MAVEN_CENTRAL_PORTAL_USERNAME, MAVEN_CENTRAL_PORTAL_PASSWORD</li>
    </ul>
  </li>
  <li>deploy-to-sourceforge-files: Downloads the ‚Äúdist-artifact‚Äù and ‚Äúdocs-artifact‚Äù from the ‚ÄúBuild‚Äù workflow,
gpg-signs the files and uploads them to <a href="https://sourceforge.net/projects/pmd/files/pmd/">https://sourceforge.net/projects/pmd/files/pmd/</a>.
    <ul>
      <li>Environment: sourceforge</li>
      <li>Secrets: PMD_WEB_SOURCEFORGE_NET_DEPLOY_KEY</li>
      <li>Vars: PMD_WEB_SOURCEFORGE_NET_KNOWN_HOSTS, PMD_GIT_CODE_SF_NET_KNOWN_HOSTS</li>
    </ul>
  </li>
  <li>deploy-to-sourceforge-io: Uploads the documentation page to be hosted at
<a href="https://pmd.sourceforge.io/snapshot">https://pmd.sourceforge.io/snapshot</a>.
    <ul>
      <li>Environment: sourceforge</li>
      <li>Secrets: PMD_WEB_SOURCEFORGE_NET_DEPLOY_KEY</li>
      <li>Vars: PMD_WEB_SOURCEFORGE_NET_KNOWN_HOSTS</li>
    </ul>
  </li>
  <li>deploy-to-pmd-code-doc: Uploads the documentation page to be hosted at
<a href="https://docs.pmd-code.org/snapshot/">https://docs.pmd-code.org/snapshot/</a>.
    <ul>
      <li>Environment: pmd-code</li>
      <li>Secrets: PMD_CODE_ORG_DEPLOY_KEY</li>
      <li>Vars: PMD_CODE_ORG_KNOWN_HOSTS</li>
    </ul>
  </li>
  <li>deploy-to-pmd-code-javadoc: Uploads the javadoc of PMD‚Äôs modules to be hosted at
<a href="https://docs.pmd-code.org/apidocs/">https://docs.pmd-code.org/apidocs/</a>.
    <ul>
      <li>Environment: pmd-code</li>
      <li>Secrets: PMD_CODE_ORG_DEPLOY_KEY</li>
      <li>Vars: PMD_CODE_ORG_KNOWN_HOSTS</li>
    </ul>
  </li>
  <li>deploy-to-github-pages: Updates the branch ‚Äúgh-pages‚Äù wit the new documentation page
and pushes a new commit onto that branch. This will trigger a new github pages deployment,
so that the new documentation page is available at
<a href="https://pmd.github.io/pmd/">https://pmd.github.io/pmd/</a>.
    <ul>
      <li>Environment: github-pages</li>
      <li>Secrets: no additional secrets</li>
    </ul>
  </li>
  <li>github-prerelease: Creates a new GitHub pre-release or updates and existing one at <a href="https://github.com/pmd/pmd/releases">https://github.com/pmd/pmd/releases</a>.
This looks like a real release and includes the usual attached (signed) artifacts.
The release is reused and the tag is moved forward for every pre-release.
    <ul>
      <li>Environment: github</li>
    </ul>
  </li>
  <li>create-regression-tester-baseline: Creates a new baseline to be used by the pull request builds
for regression testing. The baseline is uploaded to <a href="https://pmd-code.org/pmd-regression-tester/main-baseline.zip">https://pmd-code.org/pmd-regression-tester/main-baseline.zip</a>.
    <ul>
      <li>Environment: pmd-code</li>
      <li>Secrets: PMD_CODE_ORG_DEPLOY_KEY</li>
      <li>Vars: PMD_CODE_ORG_KNOWN_HOSTS</li>
    </ul>
  </li>
  <li>run-sonar: Executes <a href="https://github.com/SonarSource/sonar-scanner-maven">sonar-scanner-plugin</a> and
uploads the results to sonarcloud at <a href="https://sonarcloud.io/dashboard?id=net.sourceforge.pmd%3Apmd">https://sonarcloud.io/dashboard?id=net.sourceforge.pmd%3Apmd</a>.
    <ul>
      <li>Environment: sonarcloud</li>
      <li>Secrets: SONAR_TOKEN</li>
    </ul>
  </li>
  <li>run-coveralls: Executes <a href="https://github.com/hazendaz/coveralls-maven-plugin">coveralls-maven-plugin</a> and
uploads the results to coveralls at <a href="https://coveralls.io/github/pmd/pmd">https://coveralls.io/github/pmd/pmd</a>.
    <ul>
      <li>Environment: coveralls</li>
      <li>Secrets: COVERALLS_REPO_TOKEN</li>
    </ul>
  </li>
</ul>

<h2 id="publish-release">Publish Release</h2>

<ul>
  <li>Builds: <a href="https://github.com/pmd/pmd/actions/workflows/publish-release.yml">https://github.com/pmd/pmd/actions/workflows/publish-release.yml</a></li>
  <li>Workflow file: <a href="https://github.com/pmd/pmd/blob/main/.github/workflows/publish-release.yml">https://github.com/pmd/pmd/blob/main/.github/workflows/publish-release.yml</a></li>
</ul>

<p>This runs after ‚ÄúBuild Release‚Äù finishes from building from a tag.
It runs in the context of our own repository and has access to all secrets. In order to have
a nicer progress display in GitHub actions, we leverage ‚Äúenvironments‚Äù, which also
contain secrets.</p>

<p>There is a first job ‚Äúcheck-version‚Äù that just determines the version of PMD we are building. This is to ensure,
we are actually building a RELEASE version. Then a first job is executed:</p>

<ul>
  <li>deploy-to-maven-central: Rebuilds PMD from the tag and deploys the artifact to maven central at
<a href="https://repo.maven.apache.org/maven2/net/sourceforge/pmd/">https://repo.maven.apache.org/maven2/net/sourceforge/pmd/</a>.
Rebuilding is necessary in order to produce all necessary artifacts (sources, javadoc) and also gpg-sign the
artifacts. This is not available from the build artifacts of the ‚ÄúBuild‚Äù workflow.<br />
The maven plugin <a href="https://central.sonatype.org/publish/publish-portal-maven/">central-publishing-maven-plugin</a> is used
to upload and publish the artifacts to maven central.
    <ul>
      <li>Environment: maven-central</li>
      <li>Secrets: MAVEN_CENTRAL_PORTAL_USERNAME, MAVEN_CENTRAL_PORTAL_PASSWORD</li>
    </ul>
  </li>
</ul>

<p>When this was successful, then a couple of other jobs are being executed in parallel:</p>

<ul>
  <li>deploy-to-sourceforge-files: Uploads the binary distribution files to sourceforge at
<a href="https://sourceforge.net/projects/pmd/files/pmd/">https://sourceforge.net/projects/pmd/files/pmd/</a> and select the new file as the latest
version.
    <ul>
      <li>Environment: sourceforge</li>
      <li>Secrets: PMD_WEB_SOURCEFORGE_NET_DEPLOY_KEY, PMD_SF_APIKEY</li>
      <li>Vars: PMD_WEB_SOURCEFORGE_NET_KNOWN_HOSTS</li>
    </ul>
  </li>
  <li>deploy-to-sourceforge-io: Uploads the documentation to
<a href="https://pmd.sourceforge.io/pmd-${PMD_VERSION}/">https://pmd.sourceforge.io/pmd-${PMD_VERSION}/</a>.
    <ul>
      <li>Environment: sourceforge</li>
      <li>Secrets: PMD_WEB_SOURCEFORGE_NET_DEPLOY_KEY</li>
      <li>Vars: PMD_WEB_SOURCEFORGE_NET_KNOWN_HOSTS</li>
    </ul>
  </li>
  <li>deploy-to-pmd-code-doc: Uploads the documentation to <a href="https://docs.pmd-code.org/latest">https://docs.pmd-code.org/latest</a>.
    <ul>
      <li>Environment: pmd-code</li>
      <li>Secrets: PMD_CODE_ORG_DEPLOY_KEY</li>
      <li>Vars: PMD_CODE_ORG_KNOWN_HOSTS</li>
    </ul>
  </li>
  <li>deploy-to-pmd-code-javadoc: Uploads the javadoc to <a href="https://docs.pmd-code.org/apidocs/">https://docs.pmd-code.org/apidocs/</a>
    <ul>
      <li>Environment: pmd-code</li>
      <li>Secrets: PMD_CODE_ORG_DEPLOY_KEY</li>
      <li>Vars: PMD_CODE_ORG_KNOWN_HOSTS</li>
    </ul>
  </li>
  <li>github-release: Creates a new GitHub release at <a href="https://github.com/pmd/pmd/releases">https://github.com/pmd/pmd/releases</a> including
the attached artifacts. Deletes a pre-release for the same version, if it exists.
    <ul>
      <li>Environment: github</li>
    </ul>
  </li>
  <li>create-sourceforge-blog-post: Creates a news entry at <a href="https://sourceforge.net/p/pmd/news/">https://sourceforge.net/p/pmd/news/</a>.
    <ul>
      <li>Environment: sourceforge</li>
      <li>Secrets: PMD_SF_BEARER_TOKEN</li>
    </ul>
  </li>
  <li>create-regression-tester-baseline: Creates a new baseline and uploads it to
<a href="https://pmd-code.org/pmd-regression-tester/">https://pmd-code.org/pmd-regression-tester/</a>.
    <ul>
      <li>Environment: pmd-code</li>
      <li>Secrets: PMD_CODE_ORG_DEPLOY_KEY</li>
      <li>Vars: PMD_CODE_ORG_KNOWN_HOSTS</li>
    </ul>
  </li>
  <li>upload-regression-tester-baseline-sourceforge: Uploads the baseline additionally to sourceforge
at <a href="https://sourceforge.net/projects/pmd/files/pmd-regression-tester/">https://sourceforge.net/projects/pmd/files/pmd-regression-tester/</a>. Needs the previous job.
    <ul>
      <li>Environment: sourceforge</li>
      <li>Secrets: PMD_WEB_SOURCEFORGE_NET_DEPLOY_KEY</li>
      <li>Vars: PMD_WEB_SOURCEFORGE_NET_KNOWN_HOSTS</li>
    </ul>
  </li>
  <li>create-docker: Triggers a new build at <a href="https://github.com/pmd/docker/actions">https://github.com/pmd/docker/actions</a> to create and
upload a new docker image to Docker Hub and GitHub Packages.
    <ul>
      <li>Environment: github</li>
      <li>Uses PMD Actions Helper app to call a workflow in the other repository</li>
      <li>Secrets: PMD_ACTIONS_HELPER_ID, PMD_ACTIONS_HELPER_PRIVATE_KEY</li>
    </ul>
  </li>
</ul>

<h2 id="secrets-and-variables">Secrets and Variables</h2>
<p>The ‚ÄúBuild‚Äù workflow doesn‚Äôt need any secrets or additional permissions, it just builds and creates artifacts.
This is necessary, so that this workflow can also run on forks, so that contributors can develop in their
own fork and have their build validated already. All branches (not only main) are built. The same workflow is
also used for pull request builds.</p>

<p>On the main PMD repository (<a href="https://github.com/pmd/pmd">https://github.com/pmd/pmd</a>) additional workflows are triggered after ‚ÄúBuild‚Äù.
These additional workflows run with privileged mode, so that they have access to all secrets and can
elevate permissions as needed.</p>

<p>Secrets and variables are organized in a hierarchy, beginning at the organization level (those secrets are
available in all repositories), repository level and environment level (environments can be created at the
repository level).</p>

<p>At time of this writing (2025-05-10), the following secrets and variables are configured:</p>

<h3 id="organization">Organization</h3>
<p>See <a href="https://github.com/organizations/pmd/settings/secrets/actions">https://github.com/organizations/pmd/settings/secrets/actions</a></p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">PMD_ACTIONS_HELPER_ID</code> and <code class="language-plaintext highlighter-rouge">PMD_ACTIONS_HELPER_PRIVATE_KEY</code>: These are the app id and private key for our
custom GitHub App <a href="https://github.com/organizations/pmd/settings/apps/pmd-actions-helper">PMD Actions Helper</a>.
This is a private app defined at our organization and can only be installed within our organization. With these two
secrets and the action <a href="https://github.com/actions/create-github-app-token">create-github-app-token</a> we can
create a temporary github token, that has more permissions to access other repositories.
This is used to trigger the workflow in pmd/docker from pmd/pmd to create and upload a new docker image and
also in ‚Äúpublish-snapshot‚Äù to push to repository pmd/pmd-eclipse-plugin-p2-site during the build
of pmd/pmd-eclipse-plugin.<br />
A new private key can be generated through GitHub organization settings.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">PMD_CI_GPG_PASSPHRASE</code> and <code class="language-plaintext highlighter-rouge">PMD_CI_GPG_PRIVATE_KEY</code>: That‚Äôs the secret GPG key used to sign our releases,
see <a href="pmd_userdocs_signed_releases.html">Signed Releases</a>. The key is exported in armored format
(beginning with ‚Äú‚Äî‚ÄìBEGIN PGP PRIVATE KEY BLOCK‚Äî‚Äì‚Äù). The key is imported during the build either with
the option ‚Äúgpg-private-key‚Äù of <a href="https://github.com/actions/setup-java">setup-java</a> action or manually
via a small shell script (‚Äúgpg ‚Äìimport ‚Ä¶‚Äù).<br />
The release signing key is created in such a way, that we use the primary key only for certifying our own
subkeys (capability C) and we have a separate subkey that is used only for signing releases
(capability S). In case the signing subkey gets compromised, we can add a new subkey, but keep the
primary key. The idea is, that only the private key of the subkey is exported and put into the
secret variable <code class="language-plaintext highlighter-rouge">PMD_CI_GPG_PRIVATE_KEY</code>. This can be achieved through
<code class="language-plaintext highlighter-rouge">gpg --armor --export-secret-subkeys 2EFA55D0785C31F956F2F87EA0B5CA1A4E086838 | wl-copy</code>.<br />
More information about creating and renewing this key, see below <a href="#release-signing-keys">Release Signing Keys</a>.</p>
  </li>
</ul>

<h3 id="repository-pmdpmd">Repository pmd/pmd</h3>
<p>See <a href="https://github.com/pmd/pmd/settings/secrets/actions">https://github.com/pmd/pmd/settings/secrets/actions</a></p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">AWS_S3_PMD_PULL_REQUESTS_ACCESS_KEY_ID</code> and <code class="language-plaintext highlighter-rouge">AWS_S3_PMD_PULL_REQUESTS_SECRET_ACCESS_KEY</code>: Used by
‚ÄúPublish Results From Pull Request‚Äù to upload the regression report and documentation to the AWS S3
bucket ‚Äúpmd-pull-requests‚Äù: http://pmd-pull-requests.s3-website.eu-central-1.amazonaws.com/.
This access key corresponds to the user ‚Äúarn:aws:iam::624352026855:user/pmd-pull-requests‚Äù, which is
granted write access to this bucket via the following permission policy:</p>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nl">"Sid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VisualEditor0"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="s2">"s3:Get*"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"s3:List*"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"s3:PutObject"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"s3:DeleteObject"</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="nl">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="s2">"arn:aws:s3:::pmd-pull-requests/*"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"arn:aws:s3:::pmd-pull-requests"</span><span class="w">
          </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
    <p>New access key/users need to be created via AWS.</p>
  </li>
</ul>

<h3 id="repository-pmddocker">Repository pmd/docker</h3>
<p>See <a href="https://github.com/pmd/docker/settings/secrets/actions">https://github.com/pmd/docker/settings/secrets/actions</a></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">DOCKER_USERNAME</code> and <code class="language-plaintext highlighter-rouge">DOCKER_PASSWORD</code>: Used by repo pmd/docker to push new images to
<a href="https://hub.docker.com/u/pmdcode">https://hub.docker.com/u/pmdcode</a>. This is actually a personal access token of user <a href="https://hub.docker.com/u/andreasdangel">andreasdangel</a>,
who is the only member of the community organization <a href="https://hub.docker.com/u/pmdcode">pmdcode</a>.</li>
</ul>

<h3 id="repository-pmdpmd-regression-tester---environment-rubygems">Repository pmd/pmd-regression-tester - Environment ‚Äúrubygems‚Äù</h3>
<p>See <a href="https://github.com/pmd/pmd-regression-tester/settings/secrets/actions">https://github.com/pmd/pmd-regression-tester/settings/secrets/actions</a></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">GEM_HOST_API_KEY</code>: Used to publish a new version into <a href="https://rubygems.org/gems/pmdtester">https://rubygems.org/gems/pmdtester</a>.
The key can be generated at <a href="https://rubygems.org/profile/api_keys">https://rubygems.org/profile/api_keys</a>.</li>
</ul>

<h3 id="repository-pmdpmd---environment-maven-central">Repository pmd/pmd - Environment ‚Äúmaven-central‚Äù</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">MAVEN_CENTRAL_PORTAL_USERNAME</code> and <code class="language-plaintext highlighter-rouge">MAVEN_CENTRAL_PORTAL_PASSWORD</code>: Used to deploy artifacts to maven
central via <a href="https://central.sonatype.com">https://central.sonatype.com</a>. See <a href="https://central.sonatype.org/">https://central.sonatype.org/</a> for the documentation.
The upload uses token-based authentication, you can generate a user token on <a href="https://central.sonatype.com/account">https://central.sonatype.com/account</a>.</li>
</ul>

<h3 id="repository-pmdpmd---environment-coveralls">Repository pmd/pmd - Environment ‚Äúcoveralls‚Äù</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">COVERALLS_REPO_TOKEN</code>: Used to upload coverage results to <a href="https://coveralls.io/github/pmd/pmd">https://coveralls.io/github/pmd/pmd</a>.
When you log in via GitHub on coveralls.io, the token is displayed on that page.</li>
</ul>

<h3 id="repository-pmdpmd---environment-sonarcloud">Repository pmd/pmd - Environment ‚Äúsonarcloud‚Äù</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">SONAR_TOKEN</code>: Used to upload new results to <a href="https://sonarcloud.io/dashboard?id=net.sourceforge.pmd%3Apmd">https://sonarcloud.io/dashboard?id=net.sourceforge.pmd%3Apmd</a>.
The token can be configured here: <a href="https://sonarcloud.io/account/security/">https://sonarcloud.io/account/security/</a>. Login via GitHub.</li>
</ul>

<h3 id="repository-pmdpmd---environment-sourceforge">Repository pmd/pmd - Environment ‚Äúsourceforge‚Äù</h3>
<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">PMD_WEB_SOURCEFORGE_NET_DEPLOY_KEY</code>: The private ssh key used to access web.sourceforge.net to
upload files and web pages. It is also used to push to sourceforge‚Äôs git repository at ‚Äúgit.code.sf.net‚Äù.<br />
It is created with <code class="language-plaintext highlighter-rouge">ssh-keygen -t ed25519 -C "ssh key for pmd. used for github actions push to web.sourceforge.net" -f web.sourceforge.net_deploy_key</code>.<br />
You need to configure the public key part here: <a href="https://sourceforge.net/auth/shell_services">https://sourceforge.net/auth/shell_services</a>. The user is your
sourceforge user id.<br />
The key should begin with ‚Äú‚Äî‚ÄìBEGIN OPENSSH PRIVATE KEY‚Äî‚Äì‚Äù.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">PMD_SF_BEARER_TOKEN</code>: This is needed to access sourceforge API (https://sourceforge.net/p/forge/documentation/Allura%20API/)
to create new blog entries. The token is created at <a href="https://sourceforge.net/auth/oauth/">https://sourceforge.net/auth/oauth/</a>.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">PMD_SF_APIKEY</code>: This is needed to select the latest release on sourceforge files, see
<a href="https://sourceforge.net/p/forge/documentation/Using%20the%20Release%20API/">https://sourceforge.net/p/forge/documentation/Using%20the%20Release%20API/</a>. The key is created at
<a href="https://sourceforge.net/auth/preferences/">https://sourceforge.net/auth/preferences/</a> under ‚ÄúReleases API Key‚Äù.</p>
  </li>
</ul>

<p>This environment also has a variable, which is the known_hosts content as <code class="language-plaintext highlighter-rouge">PMD_WEB_SOURCEFORGE_NET_KNOWN_HOSTS</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#
# web.sourceforge.net (https://sourceforge.net/p/forge/documentation/SSH%20Key%20Fingerprints/)
#
# run locally:
# ssh-keyscan web.sourceforge.net | tee -a sf_known_hosts
#
# verify fingerprints:
# ssh-keygen -F web.sourceforge.net -l -f sf_known_hosts
# # Host web.sourceforge.net found: line 1 
# web.sourceforge.net RSA SHA256:xB2rnn0NUjZ/E0IXQp4gyPqc7U7gjcw7G26RhkDyk90 
# # Host web.sourceforge.net found: line 2 
# web.sourceforge.net ECDSA SHA256:QAAxYkf0iI/tc9oGa0xSsVOAzJBZstcO8HqGKfjpxcY 
# # Host web.sourceforge.net found: line 3 
# web.sourceforge.net ED25519 SHA256:209BDmH3jsRyO9UeGPPgLWPSegKmYCBIya0nR/AWWCY 
#
# then add output of `ssh-keygen -F web.sourceforge.net -f sf_known_hosts`
#
web.sourceforge.net ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA2uifHZbNexw6cXbyg1JnzDitL5VhYs0E65Hk/tLAPmcmm5GuiGeUoI/B0eUSNFsbqzwgwrttjnzKMKiGLN5CWVmlN1IXGGAfLYsQwK6wAu7kYFzkqP4jcwc5Jr9UPRpJdYIK733tSEmzab4qc5Oq8izKQKIaxXNe7FgmL15HjSpatFt9w/ot/CHS78FUAr3j3RwekHCm/jhPeqhlMAgC+jUgNJbFt3DlhDaRMa0NYamVzmX8D47rtmBbEDU3ld6AezWBPUR5Lh7ODOwlfVI58NAf/aYNlmvl2TZiauBCTa7OPYSyXJnIPbQXg6YQlDknNCr0K769EjeIlAfY87Z4tw==
web.sourceforge.net ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBCwsY6sZT4MTTkHfpRzYjxG7mnXrGL74RCT2cO/NFvRrZVNB5XNwKNn7G5fHbYLdJ6UzpURDRae1eMg92JG0+yo=
web.sourceforge.net ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOQD35Ujalhh+JJkPvMckDlhu4dS7WH6NsOJ15iGCJLC
</code></pre></div></div>

<p>Another variable <code class="language-plaintext highlighter-rouge">PMD_GIT_CODE_SF_NET_KNOWN_HOSTS</code> contains the known_hosts for ‚Äúgit.code.sf.net‚Äù:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#
# git.code.sf.net (https://sourceforge.net/p/forge/documentation/SSH%20Key%20Fingerprints/)
#
# ssh-keyscan git.code.sf.net | tee -a sf-git_known_hosts
# ssh-keygen -F git.code.sf.net -l -f sf-git_known_hosts
# # Host git.code.sf.net found: line 1 
# git.code.sf.net RSA SHA256:3WhEqJaBPKb69eT5dfgYcPJTgqc9rq1Y9saZlXqkbWg
# # Host git.code.sf.net found: line 2 
# git.code.sf.net ECDSA SHA256:FeVkoYYBjuQzb5QVAgm3BkmeN5TTgL2qfmqz9tCPRL4
# # Host git.code.sf.net found: line 3 
# git.code.sf.net ED25519 SHA256:vDwNztsrZFViJXWpUTSKGo8cF6n79iKAURNiK68n/yE
# ssh-keygen -F git.code.sf.net -f sf-git_known_hosts
git.code.sf.net ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAoMesJ60dow5VqNsIqIQMBNmSYz6txSC5YSUXzPNWV4VIWTWdqbQoQuIu+oYGhBMoeaSWWCiVIDTwFDzQXrq8CwmyxWp+2TTuscKiOw830N2ycIVmm3ha0x6VpRGm37yo+z+bkQS3m/sE7bkfTU72GbeKufFHSv1VLnVy9nmJKFOraeKSHP/kjmatj9aC7Q2n8QzFWWjzMxVGg79TUs7sjm5KrtytbxfbLbKtrkn8OXsRy1ib9hKgOwg+8cRjwKbSXVrNw/HM+MJJWp9fHv2yzWmL8B6fKoskslA0EjNxa6d76gvIxwti89/8Y6xlhR0u65u1AiHTX9Q4BVsXcBZUDw==
git.code.sf.net ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBPAa5MFfMaXyT3Trf/Av/laAvIhUzZJUnvPZAd9AC6bKWAhVl+A3s2+M6SlhF/Tn/W0akN03GyNviBtqJKtx0RU=
git.code.sf.net ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIGObtXLh/mZom0pXjE5Mu211O+JvtzolqdNKVA+XJ466
</code></pre></div></div>

<h3 id="repository-pmdpmd---environment-pmd-code">Repository pmd/pmd - Environment ‚Äúpmd-code‚Äù</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">PMD_CODE_ORG_DEPLOY_KEY</code>: The private ssh key used to access docs.pmd-code.org.
It is created with <code class="language-plaintext highlighter-rouge">ssh-keygen -t ed25519 -C "ssh key for pmd. used for github actions push to pmd-code.org" -f pmd-code.org_deploy_key</code>.<br />
The public key is configured in <code class="language-plaintext highlighter-rouge">~/.ssh/authorized_keys</code> on pmd@pmd-code.org. That means, the user is ‚Äúpmd‚Äù.<br />
The key should begin with ‚Äú‚Äî‚ÄìBEGIN OPENSSH PRIVATE KEY‚Äî‚Äì‚Äù.</li>
</ul>

<p>This environment also has a variable, which is the known_hosts content as <code class="language-plaintext highlighter-rouge">PMD_CODE_ORG_KNOWN_HOSTS</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#
# pmd-code.org
#
# ssh-keyscan pmd-code.org | tee -a pmd_known_hosts
# ssh-keygen -F pmd-code.org -l -f pmd_known_hosts
# # Host pmd-code.org found: line 1 
# pmd-code.org RSA SHA256:/uKehVNumCNvJL8C5CziwV9KkUUxHfggq0C4GTrUhwg
# # Host pmd-code.org found: line 2 
# pmd-code.org ECDSA SHA256:6aD1r1XuIoc/zgBT3bt1S9L5ToyJzdQ9rrcMchnqiRA
# # Host pmd-code.org found: line 3 
# pmd-code.org ED25519 SHA256:nvkIAzZhYTxXqSU3DWvos83A0EocZ5dsxNkx1LoMZhg
# ssh-keygen -F pmd-code.org -f pmd_known_hosts
pmd-code.org ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDVsIeF6xU0oPb/bMbxG1nU1NDyBpR/cBEPZcm/PuJwdI9B0ydPHA6FysqAnt32fNFznC2SWisnWyY3iNsP3pa8RQJVwmnnv9OboGFlW2/61o3iRyydcpPbgl+ADdt8iU9fmMI7dC04UqgHGBoqOwVNna9VylTjp5709cK2qHnwU450F6YcOEiOKeZfJvV4PmpJCz/JcsUVqft6StviR31jKnqbnkZdP8qNoTbds6WmGKyXkhHdLSZE7X1CFQH28tk8XFqditX93ezeCiThFL7EleDexV/3+2+cs5878sDMUMzHS5KShTjkxzhHaodhtIEdNesinq/hOPbxAGkQ0FbD
pmd-code.org ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBMfSJtZcJCeENSZMvdngr+Hwe7oUVQWWKwC4HnfiOoAh/NSIlzJyQvpoPZxnEFid6Y3ntDK+rnx04Japo63zD8Q=
pmd-code.org ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIFa88nqfMavMH/tGeS5DNrSeM5AVHmZQGHh98vC1717o
</code></pre></div></div>

<h2 id="release-signing-keys">Release Signing Keys</h2>

<h3 id="creating-a-new-key">Creating a new key</h3>
<p>In general, a key created once should be reused. However, if the key is (potentially) compromised, a new
key needs to be generated. A gpg key consists of a primary key and one or more subkeys. The primary key
defines the identity (fingerprint, key ID) and subkeys can be used for actual signing. The primary key is
then only used to create new subkeys or renew subkeys. For a more safe operation, the primary key should
be kept offline and only the subkeys should be used for signing. A Release Signing Key also doesn‚Äôt need
a subkey for encryption. In case a signing key gets compromised, the subkey can be revoked and a new key
can be generated. But the primary key still is safe.</p>

<p>Creating such a key is not straightforward, hence this how to (there are a couple of guides
in the internet about best practices):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gpg --expert --full-generate-key
...
Please select what kind of key you want:
&gt; 8 (RSA (set your own capabilities)
&gt; S (Toggle Sign)
&gt; E (Toggle Encrypt)
&gt; Q
Current allowed actions: Certify
What keysize do you want?
&gt; 4096
Please specify how long the key should be valid.
&gt; 2y
Real name:
&gt; PMD Release Signing Key
Email address:
&gt; releases@pmd-code.org
...
pub   rsa4096 2025-01-04 [C] [expires: 2027-01-04]
      2EFA55D0785C31F956F2F87EA0B5CA1A4E086838
uid                      PMD Release Signing Key &lt;releases@pmd-code.org&gt;
</code></pre></div></div>

<p>Then we create a subkey for signing:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gpg --edit-key 2EFA55D0785C31F956F2F87EA0B5CA1A4E086838
gpg&gt; addkey
&gt; 4 (RSA (sign only))
keysize:
&gt; 4096
Expiration
&gt; 2y
...
&gt; save
</code></pre></div></div>

<p>Now let‚Äôs publish the public key:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gpg --armor --export 2EFA55D0785C31F956F2F87EA0B5CA1A4E086838 | curl -T - https://keys.openpgp.org
Key successfully uploaded. Proceed with verification here:
https://keys.openpgp.org/upload/....
</code></pre></div></div>

<p>Export the key to upload it to <a href="https://keyserver.ubuntu.com/#submitKey">https://keyserver.ubuntu.com/#submitKey</a>:
<code class="language-plaintext highlighter-rouge">gpg --armor --export 2EFA55D0785C31F956F2F87EA0B5CA1A4E086838 | wl-copy</code>
Also upload it to <a href="http://pgp.mit.edu/">http://pgp.mit.edu/</a>.</p>

<p>Verify the uploaded (public) key (and expiration date):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg --armor --export 2EFA55D0785C31F956F2F87EA0B5CA1A4E086838 &gt; release-signing-key-2EFA55D0785C31F956F2F87EA0B5CA1A4E086838-public.asc
gpg --show-keys release-signing-key-2EFA55D0785C31F956F2F87EA0B5CA1A4E086838-public.asc
curl 'https://keys.openpgp.org/vks/v1/by-fingerprint/2EFA55D0785C31F956F2F87EA0B5CA1A4E086838' | gpg --show-keys
curl 'https://keyserver.ubuntu.com/pks/lookup?search=0x2EFA55D0785C31F956F2F87EA0B5CA1A4E086838&amp;fingerprint=on&amp;exact=on&amp;options=mr&amp;op=get' | gpg --show-keys
curl 'http://pgp.mit.edu/pks/lookup?op=get&amp;search=0x2EFA55D0785C31F956F2F87EA0B5CA1A4E086838' | gpg --show-keys
</code></pre></div></div>

<h3 id="current-key">Current Key</h3>

<ul>
  <li>Used since January 2025</li>
  <li>Fingerprint <code class="language-plaintext highlighter-rouge">2EFA 55D0 785C 31F9 56F2  F87E A0B5 CA1A 4E08 6838</code></li>
  <li>Used for signing artifacts in Maven Central</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gpg --list-keys --fingerprint --with-subkey-fingerprint 2EFA55D0785C31F956F2F87EA0B5CA1A4E086838
pub   rsa4096 2025-01-04 [C] [verf√§llt: 2027-01-04]
      2EFA 55D0 785C 31F9 56F2  F87E A0B5 CA1A 4E08 6838
uid        [ ultimativ ] PMD Release Signing Key &lt;releases@pmd-code.org&gt;
sub   rsa4096 2025-01-04 [S] [verf√§llt: 2027-01-04]
      1E04 6C19 ED28 73D8 C08A  F7B8 A063 2691 B78E 3422
</code></pre></div></div>

<p>The public key is available here:</p>
<ul>
  <li><a href="https://keys.openpgp.org/search?q=0x2EFA55D0785C31F956F2F87EA0B5CA1A4E086838">https://keys.openpgp.org/search?q=0x2EFA55D0785C31F956F2F87EA0B5CA1A4E086838</a></li>
  <li><a href="https://keyserver.ubuntu.com/pks/lookup?search=0x2EFA55D0785C31F956F2F87EA0B5CA1A4E086838&amp;fingerprint=on&amp;op=index">https://keyserver.ubuntu.com/pks/lookup?search=0x2EFA55D0785C31F956F2F87EA0B5CA1A4E086838&amp;fingerprint=on&amp;op=index</a></li>
  <li><a href="http://pgp.mit.edu/pks/lookup?search=0x2EFA55D0785C31F956F2F87EA0B5CA1A4E086838&amp;fingerprint=on&amp;op=index">http://pgp.mit.edu/pks/lookup?search=0x2EFA55D0785C31F956F2F87EA0B5CA1A4E086838&amp;fingerprint=on&amp;op=index</a></li>
  <li><a href="https://github.com/pmd/build-tools/blob/main/scripts/files/release-signing-key-2EFA55D0785C31F956F2F87EA0B5CA1A4E086838-public.asc">https://github.com/pmd/build-tools/blob/main/scripts/files/release-signing-key-2EFA55D0785C31F956F2F87EA0B5CA1A4E086838-public.asc</a></li>
</ul>

<h3 id="old-keys">Old keys</h3>

<ul>
  <li>Fingerprint <code class="language-plaintext highlighter-rouge">EBB2 41A5 45CB 17C8 7FAC B2EB D0BF 1D73 7C9A 1C22</code>
    <ul>
      <li>Used until December 2024</li>
      <li>Replaced as the passphrase has been compromised and therefore the key is potentially
compromised. Note - as until now (January 2025) we don‚Äôt have any indication that the key
actually has been misused.</li>
      <li>Revoked 2025-01-04.</li>
      <li>see file <code class="language-plaintext highlighter-rouge">release-signing-key-D0BF1D737C9A1C22-public.asc</code>.</li>
    </ul>
  </li>
  <li>Fingerprint <code class="language-plaintext highlighter-rouge">94A5 2756 9CAF 7A47 AFCA  BDE4 86D3 7ECA 8C2E 4C5B</code>
    <ul>
      <li>Old key used to sign PMD Designer</li>
      <li>Revoked 2025-01-04.</li>
    </ul>
  </li>
</ul>

<h3 id="private-key">Private key</h3>

<p>In order for GitHub Actions to automatically sign the artifacts for snapshot builds and release builds,
we need to make the private key along with the passphrase available. This is done using
multiple <a href="https://help.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets"><code class="language-plaintext highlighter-rouge">secrets</code></a>.
The secrets are configured on the organization level of PMD, so that the Release Signing key is available
for all repositories.</p>

<p>To not expose the master key, we only export the subkeys we use for signing and store this in the secret
<code class="language-plaintext highlighter-rouge">PMD_CI_GPG_PRIVATE_KEY</code>.</p>

<p>For setting up, export the secret key and copy-paste it into a new secret:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg --armor --export-secret-subkeys 2EFA55D0785C31F956F2F87EA0B5CA1A4E086838 | wl-copy
</code></pre></div></div>

<p>(instead of wl-copy, use xclip or pbcopy, depending on your os).</p>

<p>This private key will be imported by setup-java or a small shell script.</p>

<p><strong>Note 1:</strong> We use option <code class="language-plaintext highlighter-rouge">--export-secret-subkeys</code> to only export the subkey and not the master key.
That way, we don‚Äôt need to transfer the master key.</p>

<p><strong>Note 2:</strong> In order to use the key later on, the passphrase is needed. This is also setup as a secret:
<code class="language-plaintext highlighter-rouge">PMD_CI_GPG_PASSPHRASE</code>. This secret is then exported as ‚ÄúMAVEN_GPG_PASSPHRASE‚Äù where needed
(<code class="language-plaintext highlighter-rouge">MAVEN_GPG_PASSPHRASE: $</code>) in github actions workflows.
See also <a href="https://maven.apache.org/plugins/maven-gpg-plugin/usage.html#sign-artifacts-with-gnupg">https://maven.apache.org/plugins/maven-gpg-plugin/usage.html#sign-artifacts-with-gnupg</a>.</p>

<p><strong>Note 3:</strong> The private key is now only secured by the passphrase. It is stored as a GitHub Actions
secret and available in an environment variable. It is not committed as a file anywhere. Note:
When importing the key, it is stored on disk in ‚Äú~/.gnupg‚Äù - hence the GitHub Actions should make sure
to delete this directory on the runner after the workflow is finished in order to not leak
the key to following users of the runner.</p>

<h3 id="updating-the-key">Updating the key</h3>

<p>From time to time the key needs to be renewed, passphrase needs to be changed or a whole (sub)key needs to
be replaced.</p>

<p>For renewing or changing the passphrase, import the private master key and public key into your local gpg keystore
(if you don‚Äôt have it already in your keyring) and renew it.
Make sure to renew all subkeys. Then export the public key again.</p>

<p>For replacing, generate a new (sub) key, just export it.</p>

<p>You can verify the expiration date with <code class="language-plaintext highlighter-rouge">gpg --fingerprint --list-key 2EFA55D0785C31F956F2F87EA0B5CA1A4E086838</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pub   rsa4096 2025-01-04 [C] [expires: 2027-01-04]
      2EFA 55D0 785C 31F9 56F2  F87E A0B5 CA1A 4E08 6838
uid           [ultimate] PMD Release Signing Key &lt;releases@pmd-code.org&gt;
sub   rsa4096 2025-01-04 [S] [expires: 2027-01-04]

</code></pre></div></div>

<p>Upload the exported <em>public</em> key to</p>

<ul>
  <li><a href="https://keys.openpgp.org/upload">https://keys.openpgp.org/upload</a></li>
  <li><a href="https://keyserver.ubuntu.com/#submitKey">https://keyserver.ubuntu.com/#submitKey</a></li>
  <li><a href="http://pgp.mit.edu/">http://pgp.mit.edu/</a></li>
</ul>

<p>Verify the uploaded key expiration date:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg --show-keys release-signing-key-2EFA55D0785C31F956F2F87EA0B5CA1A4E086838-public.asc
curl 'https://keys.openpgp.org/vks/v1/by-fingerprint/2EFA55D0785C31F956F2F87EA0B5CA1A4E086838' | gpg --show-keys
curl 'https://keyserver.ubuntu.com/pks/lookup?search=0x2EFA55D0785C31F956F2F87EA0B5CA1A4E086838&amp;fingerprint=on&amp;exact=on&amp;options=mr&amp;op=get' | gpg --show-keys
curl 'http://pgp.mit.edu/pks/lookup?op=get&amp;search=0x2EFA55D0785C31F956F2F87EA0B5CA1A4E086838' | gpg --show-keys
</code></pre></div></div>

<p>Don‚Äôt forget to update the secret <code class="language-plaintext highlighter-rouge">PMD_CI_GPG_PRIVATE_KEY</code> with the renewed private signing subkey.</p>


    <div class="tags">
        
    </div>

</div>


<footer>
    
    <hr />
    <div>
        This documentation is written in markdown. <br />
        If there is something missing or can be improved, edit this page on
        github and create a PR:
        <a
            target="_blank"
            href="https://github.com/pmd/pmd/blob/main/docs/pages/pmd/devdocs/github_actions_workflows.md"
            role="button"
            ><i class="fab fa-github fa-lg"></i> Edit on GitHub</a
        >
    </div>
    
    <hr />
    <div class="row">
        <div class="col-lg-12 footer">
            &copy;2025 PMD Open Source Project. All rights
            reserved. <br />
            <span>Page last updated:</span>
            July 2025 (7.17.0)<br /> Site last generated: Nov 6, 2025 <br />
            <p>
                <img src="images/logo/pmd-logo-70px.png" alt="PMD
                logo"/>
            </p>
        </div>
    </div>
</footer>


            </div>

            <!-- /.row -->
        </div>
        <!-- /.container -->
    </div>

    
    <!-- Sticky TOC column -->
    <div class="toc-col">
        <div id="toc"></div>
    </div>
    
    <!-- /.toc-container-wrapper -->
</div>
</div>

<script type="application/javascript" src="assets/jquery-3.5.1/jquery-3.5.1.min.js"></script>
<script type="application/javascript" src="assets/anchorjs-4.2.2/anchor.min.js"></script>
<script type="application/javascript" src="assets/navgoco-0.2.1/src/jquery.navgoco.min.js"></script>
<script type="application/javascript" src="assets/bootstrap-4.5.2-dist/js/bootstrap.bundle.min.js"></script>
<script type="application/javascript" src="assets/Simple-Jekyll-Search-1.14.0/dest/simple-jekyll-search.min.js"></script>
<script type="application/javascript" src="assets/jekyll-table-of-contents/toc.js"></script>
<script type="application/javascript" src="js/tabstate.js"></script>
<script type="application/javascript" src="js/customscripts.js"></script>
<script type="application/javascript" src="js/search.js"></script>



</body>
</html>
